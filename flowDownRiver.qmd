---
title: "Visualizations of River Discharge flowing downstream"
---

```{R}

# eastward flow out of Okeechobee
stations <- c(
  "S-308",
  "S-80"
)

# westward flow out of Okeechobee
stations <- c(
  "S-354",
  "S-79"
)

# southeastern flow out of Okeechobee
stations <- c(
  "HillsCan"
)

# south flow out of Okeechobee
stations <- c(
  "S-351",
  "S-12"
)

# SW flow out of Everglades
stations <- c(
  "BotCr",
  "Flam"
)

# lake outflow total
stations <- c(
  "S-351",
  "S-354",
  "S-308",
  "LV8",
  "HillsCan"
)

param_name <- "Disch"

source("R/getData.R")

df <- data.frame()
for(station_shortname in stations){
  # Get the data for the current station using the parameter name
  df <- getData(station_shortname, param_name)

  # Calculate a moving average
  library(zoo)
  df$moving_avg <- rollmean(df$value, k = 90, fill = NA, align = "right")
  
  
  # Create the time series plot
  library(ggplot2)
  p <- ggplot(df, aes(x = datetime, y = value)) +
    geom_point(shape = 4, color = "black", alpha = 0.1) +  # Transparent blue "x"
    geom_line(aes(y = moving_avg), color = "blue", size = 1) +  # Moving average line
    labs(
      title = "Time Series Plot",
      x = "Datetime",
      y = "Value"
    ) +
    theme_minimal()
  print(p)
}
```
