[
  {
    "objectID": "flowDownRiver.html",
    "href": "flowDownRiver.html",
    "title": "Visualizations of River Discharge flowing downstream",
    "section": "",
    "text": "stations &lt;-c(\n  \"02292900\",\n  \"02276998\",\n  \"022908295\"\n)\n\nparam_name &lt;- \"Disch\"\n\nsource(\"R/getData.R\")\n\ndf &lt;- data.frame()\nfor(station_id in stations){\n  # Get the data for the current station using the parameter name\n  df &lt;- getData(station_id, param_name)\n\n  # Calculate a moving average\n  library(zoo)\n  df$moving_avg &lt;- rollmean(df$value, k = 365, fill = NA, align = \"right\")\n  \n  \n  # Create the time series plot\n  library(ggplot2)\n  p &lt;- ggplot(df, aes(x = datetime, y = value)) +\n    geom_point(shape = 4, color = \"black\", alpha = 0.1) +  # Transparent blue \"x\"\n    geom_line(aes(y = moving_avg), color = \"blue\", size = 1) +  # Moving average line\n    labs(\n      title = \"Time Series Plot\",\n      x = \"Datetime\",\n      y = \"Value\"\n    ) +\n    theme_minimal()\n  print(p)\n}\n\n[1] \"using cached data\"\n\n\n\nAttaching package: 'zoo'\n\n\nThe following objects are masked from 'package:base':\n\n    as.Date, as.Date.numeric\n\n\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\nℹ Please use `linewidth` instead.\n\n\nWarning: Removed 364 rows containing missing values or values outside the scale range\n(`geom_line()`).\n\n\n\n\n\n\n\n\n\n[1] \"using cached data\"\n\n\nWarning: Removed 364 rows containing missing values or values outside the scale range\n(`geom_line()`).\n\n\n\n\n\n\n\n\n\n[1] \"using cached data\"\n\n\nWarning: Removed 364 rows containing missing values or values outside the scale range\n(`geom_line()`)."
  },
  {
    "objectID": "map.html",
    "href": "map.html",
    "title": "Interactive Station Map",
    "section": "",
    "text": "Map of stations.\n\n# Load required libraries\nlibrary(leaflet)\n\n# Load the data\ndata &lt;- read.csv(\"data/SouthFL_USGS_ACE_SiteList.csv\")\n\nleaflet(data) %&gt;%\n  addTiles() %&gt;%  # Add default OpenStreetMap tiles\n  addCircleMarkers(\n    ~Lon, ~Lat,\n    label = ~Station_shortname,  # Hover labels\n    radius = 5,                 # Adjust the size of the circle markers\n    color = \"blue\",             # Marker border color\n    fillColor = \"lightblue\",    # Marker fill color\n    fillOpacity = 0.7,          # Opacity of the fill color\n    popup = ~paste(\"&lt;b&gt;Station:&lt;/b&gt;\", Station_shortname)\n  )"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "fkwq-usgs-river-gauges",
    "section": "",
    "text": "Water discharge monitoring reports by IMaRS built using quarto."
  },
  {
    "objectID": "stationInspect.html",
    "href": "stationInspect.html",
    "title": "Inspect Data for Given Station",
    "section": "",
    "text": "station_id &lt;- params$station_id\n\nsource(\"R/getData.R\")\ndf &lt;- getData(station_id, \"Disch\")\n\n[1] \"using cached data\"\n\n\n\n# Calculate a moving average\nlibrary(zoo)\n\n\nAttaching package: 'zoo'\n\n\nThe following objects are masked from 'package:base':\n\n    as.Date, as.Date.numeric\n\ndf$moving_avg &lt;- rollmean(df$value, k = 365, fill = NA, align = \"center\")\n\n# Create the time series plot\nlibrary(ggplot2)\nggplot(df, aes(x = datetime, y = value)) +\n  geom_point(shape = 4, color = \"black\", alpha = 0.1) +  # Transparent blue \"x\"\n  geom_line(aes(y = moving_avg), color = \"blue\", size = 1) +  # Moving average line\n  labs(\n    title = \"Time Series Plot\",\n    x = \"Datetime\",\n    y = \"Value\"\n  ) +\n  theme_minimal()\n\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\nℹ Please use `linewidth` instead.\n\n\nWarning: Removed 364 rows containing missing values or values outside the scale range\n(`geom_line()`)."
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site"
  },
  {
    "objectID": "data-download.html",
    "href": "data-download.html",
    "title": "fkwq-usgs-river-gauges",
    "section": "",
    "text": "library(glue)\nlibrary(httr)\n\n# Read the input CSV file\nsites &lt;- read.csv(\"data/SouthFL_USGS_ACE_SiteList.csv\")\n\n# Specify the base URL\nbase_url &lt;- \"https://waterdata.usgs.gov/nwis/dv?cb_{param_code}=on&format=rdb&site_no={sta_ID}&referred_module=sw&period=&begin_date=01-01-1950&end_date=12-31-2024\"\n\n# Create a directory to save the downloaded files\noutput_dir &lt;- \"data/downloads\"\ndir.create(output_dir, showWarnings = FALSE)\n\n# Loop through each row of the dataframe\nfor (i in seq_len(nrow(sites))) {\n  # Extract parameters from the current row\n  sta_ID &lt;- sites$USGS_ID[i] # Replace with the actual column name\n  param_code &lt;- sites$parameter2[i] # Replace with the actual column name\n  \n  # Construct the URL with parameters\n  query_params &lt;- list(param1 = param1, param2 = param2)\n  url &lt;- modify_url(base_url, query = query_params)\n  \n  # Construct the output file name\n  output_file &lt;- file.path(output_dir, paste0(\"file_\", i, \".csv\"))\n  \n  # Download the file and save it locally\n  tryCatch({\n    GET(url, write_disk(output_file, overwrite = TRUE))\n    message(\"Downloaded: \", output_file)\n  }, error = function(e) {\n    warning(\"Failed to download for row \", i, \": \", conditionMessage(e))\n  })\n}\n\nmessage(\"All downloads completed.\")"
  }
]