[
  {
    "objectID": "data-download.html",
    "href": "data-download.html",
    "title": "fkwq-usgs-river-gauges",
    "section": "",
    "text": "Code\nlibrary(glue)\nlibrary(httr)\n\n# Read the input CSV file\nsites &lt;- read.csv(\"data/SouthFL_USGS_ACE_SiteList.csv\")\n\n# Specify the base URL\nbase_url &lt;- \"https://waterdata.usgs.gov/nwis/dv?cb_{param_code}=on&format=rdb&site_no={sta_ID}&referred_module=sw&period=&begin_date=01-01-1950&end_date=12-31-2024\"\n\n# Create a directory to save the downloaded files\noutput_dir &lt;- \"data/downloads\"\ndir.create(output_dir, showWarnings = FALSE)\n\n# Loop through each row of the dataframe\nfor (i in seq_len(nrow(sites))) {\n  # Extract parameters from the current row\n  sta_ID &lt;- sites$USGS_ID[i] # Replace with the actual column name\n  param_code &lt;- sites$parameter2[i] # Replace with the actual column name\n  \n  # Construct the URL with parameters\n  query_params &lt;- list(param1 = param1, param2 = param2)\n  url &lt;- modify_url(base_url, query = query_params)\n  \n  # Construct the output file name\n  output_file &lt;- file.path(output_dir, paste0(\"file_\", i, \".csv\"))\n  \n  # Download the file and save it locally\n  tryCatch({\n    GET(url, write_disk(output_file, overwrite = TRUE))\n    message(\"Downloaded: \", output_file)\n  }, error = function(e) {\n    warning(\"Failed to download for row \", i, \": \", conditionMessage(e))\n  })\n}\n\nmessage(\"All downloads completed.\")"
  },
  {
    "objectID": "riverflowWest.html",
    "href": "riverflowWest.html",
    "title": "Westward Flow out of Okeechobee",
    "section": "",
    "text": "Code\n# westward flow out of Okeechobee\nstations &lt;- c(\n  \"S-77\",\n  \"S-79\"\n)\n\nparam_name &lt;- \"Disch\"\n\nsource(\"R/plotStationsLine.R\")\nplotStationsLine(stations, param_name)\n\n\n[1] \"using cached data\"\n\n\n\nAttaching package: 'zoo'\n\n\nThe following objects are masked from 'package:base':\n\n    as.Date, as.Date.numeric\n\n\n[1] \"using cached data\"\n\n\nWarning: Removed 178 rows containing missing values or values outside the scale range\n(`geom_line()`).\n\n\n\n\n\n\n\n\n\nCode\nsource(\"R/plotStationsStream.R\")\nplotStationsStream(stations, param_name)\n\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\n\n[1] \"using cached data\"\n[1] \"using cached data\""
  },
  {
    "objectID": "outflows/outflowSouth.html",
    "href": "outflows/outflowSouth.html",
    "title": "Outflow to Gulf (South)",
    "section": "",
    "text": "Code\nstations &lt;- c(\n  # \"ESTSDCr\",  # no Disch\n  # \"AllCr\",  # no Disch\n  \"MCCr\",\n  # \"E-146\",  # no Disch\n  \"TAYRv\",\n  \"MUDCr\",\n  \"TRTCr\"\n  # \"JOBay\",  # no Disch\n  # \"WHCr  # no Disch\"\n)\n\nparam_name &lt;- \"Disch\"\n\nsource(here::here(\"R/plotStationsLine.R\"))\nplotStationsLine(stations, param_name)\n\n\n[1] \"using cached data\"\n\n\n\nAttaching package: 'zoo'\n\n\nThe following objects are masked from 'package:base':\n\n    as.Date, as.Date.numeric\n\n\n[1] \"using cached data\"\n[1] \"using cached data\"\n[1] \"using cached data\"\n\n\nWarning: Removed 356 rows containing missing values or values outside the scale range\n(`geom_line()`).\n\n\n\n\n\n\n\n\n\nCode\nsource(here::here(\"R/plotStationsStream.R\"))\nplotStationsStream(stations, param_name)\n\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\n\n[1] \"using cached data\"\n[1] \"using cached data\"\n[1] \"using cached data\"\n[1] \"using cached data\""
  },
  {
    "objectID": "outflows/outflowCentral.html",
    "href": "outflows/outflowCentral.html",
    "title": "Outflow to Gulf (Central)",
    "section": "",
    "text": "Code\nstations &lt;- c(\n  # \"3mCan\",  # metadata lookup failed \n  \"M-40\",\n  # \"S-152\",  # no Disch\n  \"S-12\"\n  # \"SR_1\",  # no Disch\n  # \"SH_4\"  # no Disch\n)\n\nparam_name &lt;- \"Disch\"\n\nsource(here::here(\"R/plotStationsLine.R\"))\nplotStationsLine(stations, param_name)\n\n\n[1] \"using cached data\"\n\n\n\nAttaching package: 'zoo'\n\n\nThe following objects are masked from 'package:base':\n\n    as.Date, as.Date.numeric\n\n\n[1] \"using cached data\"\n\n\nWarning: Removed 178 rows containing missing values or values outside the scale range\n(`geom_line()`).\n\n\n\n\n\n\n\n\n\nCode\nsource(here::here(\"R/plotStationsStream.R\"))\nplotStationsStream(stations, param_name)\n\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\n\n[1] \"using cached data\"\n[1] \"using cached data\""
  },
  {
    "objectID": "riverflowSouth.html",
    "href": "riverflowSouth.html",
    "title": "Southward Flow out of Okeechobee",
    "section": "",
    "text": "Code\nstations &lt;- c(\n  \"S-351\",\n  \"S-12\"\n)\n\nparam_name &lt;- \"Disch\"\n\nsource(\"R/plotStationsLine.R\")\nplotStationsLine(stations, param_name)\n\n\n[1] \"using cached data\"\n\n\n\nAttaching package: 'zoo'\n\n\nThe following objects are masked from 'package:base':\n\n    as.Date, as.Date.numeric\n\n\n[1] \"using cached data\"\n\n\nWarning: Removed 178 rows containing missing values or values outside the scale range\n(`geom_line()`).\n\n\n\n\n\n\n\n\n\nCode\nsource(\"R/plotStationsStream.R\")\nplotStationsStream(stations, param_name)\n\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\n\n[1] \"using cached data\"\n[1] \"using cached data\""
  },
  {
    "objectID": "riverflowEast.html",
    "href": "riverflowEast.html",
    "title": "Eastward Flow out of Okeechobee",
    "section": "",
    "text": "Code\n# eastward flow out of Okeechobee\nstations &lt;- c(\n  \"S-308\",\n  \"S-80\"\n)\n\nparam_name &lt;- \"Disch\"\n\nsource(\"R/plotStationsLine.R\")\nplotStationsLine(stations, param_name)\n\n\n[1] \"using cached data\"\n\n\n\nAttaching package: 'zoo'\n\n\nThe following objects are masked from 'package:base':\n\n    as.Date, as.Date.numeric\n\n\n[1] \"using cached data\"\n\n\nWarning: Removed 178 rows containing missing values or values outside the scale range\n(`geom_line()`).\n\n\n\n\n\n\n\n\n\nCode\nsource(\"R/plotStationsStream.R\")\nplotStationsStream(stations, param_name)\n\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\n\n[1] \"using cached data\"\n[1] \"using cached data\""
  },
  {
    "objectID": "stationInspect.html",
    "href": "stationInspect.html",
    "title": "Inspect Data for Given Station",
    "section": "",
    "text": "Code\nstation_shortname &lt;- params$station_shortname\n\nsource(\"R/getData.R\")\ndf &lt;- getData(station_shortname, \"Disch\")\n\n\n[1] \"using cached data\"\n\n\n\n\nCode\n# Calculate a moving average\nlibrary(zoo)\n\n\n\nAttaching package: 'zoo'\n\n\nThe following objects are masked from 'package:base':\n\n    as.Date, as.Date.numeric\n\n\nCode\nk &lt;- 30\ndf$moving_avg &lt;- rollmean(df$value, k = k, fill = NA, align = \"center\")\n\n# Create the time series plot\nlibrary(ggplot2)\nlibrary(glue)\nggplot(df, aes(x = datetime, y = value)) +\n  geom_point(shape = 4, color = \"black\", alpha = 0.1) +  # Transparent blue \"x\"\n  geom_line(aes(y = moving_avg), color = \"blue\", size = 1) +  # Moving average line\n  labs(\n    title = glue(\"{station_shortname} Discharge with {k}d MA\"),\n    x = \"Datetime\",\n    y = \"Value\"\n  ) +\n  theme_minimal()\n\n\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\nâ„¹ Please use `linewidth` instead.\n\n\nWarning: Removed 29 rows containing missing values or values outside the scale range\n(`geom_line()`)."
  },
  {
    "objectID": "riverflowSoutheast.html",
    "href": "riverflowSoutheast.html",
    "title": "Southeastern Flow out of Okeechobee",
    "section": "",
    "text": "Code\n# southeastern flow out of Okeechobee\nstations &lt;- c(\n  \"HillsCan\"\n)\n\nparam_name &lt;- \"Disch\"\n\nsource(\"R/plotStationsLine.R\")\nplotStationsLine(stations, param_name)\n\n\n[1] \"using cached data\"\n\n\n\nAttaching package: 'zoo'\n\n\nThe following objects are masked from 'package:base':\n\n    as.Date, as.Date.numeric\n\n\nWarning: Removed 89 rows containing missing values or values outside the scale range\n(`geom_line()`).\n\n\n\n\n\n\n\n\n\nCode\nsource(\"R/plotStationsStream.R\")\nplotStationsStream(stations, param_name)\n\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\n\n[1] \"using cached data\""
  },
  {
    "objectID": "okeeOutflow.html",
    "href": "okeeOutflow.html",
    "title": "Total Discharge Out of Okeechobee",
    "section": "",
    "text": "Code\n# lake outflow total\nstations &lt;- c(\n  \"S-351\",\n  \"S-354\",\n  \"S-308\",\n  # \"LV8\",  # no Disch\n  \"HillsCan\"\n)\n\nparam_name &lt;- \"Disch\"\n\nsource(\"R/plotStationsLine.R\")\nplotStationsLine(stations, param_name)\n\n\n[1] \"using cached data\"\n\n\n\nAttaching package: 'zoo'\n\n\nThe following objects are masked from 'package:base':\n\n    as.Date, as.Date.numeric\n\n\n[1] \"using cached data\"\n[1] \"using cached data\"\n[1] \"using cached data\"\n\n\nWarning: Removed 356 rows containing missing values or values outside the scale range\n(`geom_line()`).\n\n\n\n\n\n\n\n\n\nCode\nsource(\"R/plotStationsStream.R\")\nplotStationsStream(stations, param_name)\n\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\n\n[1] \"using cached data\"\n[1] \"using cached data\"\n[1] \"using cached data\"\n[1] \"using cached data\""
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "fkwq-usgs-river-gauges",
    "section": "",
    "text": "Water discharge monitoring reports by IMaRS built using quarto.\n\nMap of USGS stations used\n\n\nCode\n# Load required libraries\nlibrary(leaflet)\n\n# Load the data\ndata &lt;- read.csv(\"data/SouthFL_USGS_ACE_SiteList.csv\")\n\nleaflet(data) %&gt;%\n  addProviderTiles(providers$USGS.USTopo) %&gt;%\n  addCircleMarkers(\n    ~Lon, ~Lat,\n    label = ~Station_shortname,  # Hover labels\n    radius = 5,                 # Adjust the size of the circle markers\n    color = \"black\",             # Marker border color\n    fillColor = \"blue\",    # Marker fill color\n    fillOpacity = 0.7,          # Opacity of the fill color\n    popup = ~paste(\"&lt;b&gt;Station:&lt;/b&gt;\", Station_shortname)\n  )"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site"
  },
  {
    "objectID": "outflows/outflowEast.html",
    "href": "outflows/outflowEast.html",
    "title": "Outflow to Atlantic",
    "section": "",
    "text": "Code\nstations &lt;- c( # N to S\n  # \"C8Can\",  # no Disch code\n  # \"TamCan\",  # no Disch code\n  \"SnapCr\"\n  # \"BlkCrCan\"  # no Disch code\n)\n\nparam_name &lt;- \"Disch\"\n\nsource(\"../R/plotStationsLine.R\")\nplotStationsLine(stations, param_name)\n\n\n[1] \"using cached data\"\n\n\n\nAttaching package: 'zoo'\n\n\nThe following objects are masked from 'package:base':\n\n    as.Date, as.Date.numeric\n\n\nWarning: Removed 89 rows containing missing values or values outside the scale range\n(`geom_line()`).\n\n\n\n\n\n\n\n\n\nCode\nsource(\"../R/plotStationsStream.R\")\nplotStationsStream(stations, param_name)\n\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\n\n[1] \"using cached data\""
  },
  {
    "objectID": "outflows/outflowWest.html",
    "href": "outflows/outflowWest.html",
    "title": "Outflow to Gulf (Central)",
    "section": "",
    "text": "Code\nstations &lt;- c(\n  \"CHATRv\",\n  \"LostRv\",\n  \"BrdRv\",\n  # \"HarnRv\",  # no Disch\n  \"BotCr\"\n  # \"ShkRv\",  # no Disch\n  # \"Flam\"  # no Disch\n)\n\nparam_name &lt;- \"Disch\"\n\nsource(here::here(\"R/plotStationsLine.R\"))\nplotStationsLine(stations, param_name)\n\n\n[1] \"using cached data\"\n\n\n\nAttaching package: 'zoo'\n\n\nThe following objects are masked from 'package:base':\n\n    as.Date, as.Date.numeric\n\n\n[1] \"using cached data\"\n[1] \"using cached data\"\n[1] \"using cached data\"\n\n\nWarning: Removed 356 rows containing missing values or values outside the scale range\n(`geom_line()`).\n\n\n\n\n\n\n\n\n\nCode\nsource(here::here(\"R/plotStationsStream.R\"))\nplotStationsStream(stations, param_name)\n\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\n\n[1] \"using cached data\"\n[1] \"using cached data\"\n[1] \"using cached data\"\n[1] \"using cached data\""
  },
  {
    "objectID": "outflows/outflowNorth.html",
    "href": "outflows/outflowNorth.html",
    "title": "Outflow to Gulf (North)",
    "section": "",
    "text": "Code\nstations &lt;- c(\n  # \"BLKRv\",  # no Disch\n  \"PUMRv\",\n  \"FURv\",\n  \"EASTRv\"\n  # \"BARRv\",  # no Disch\n  # \"TURRv\"  # no Disch\n)\n\nparam_name &lt;- \"Disch\"\n\nsource(here::here(\"R/plotStationsLine.R\"))\nplotStationsLine(stations, param_name)\n\n\n[1] \"using cached data\"\n\n\n\nAttaching package: 'zoo'\n\n\nThe following objects are masked from 'package:base':\n\n    as.Date, as.Date.numeric\n\n\n[1] \"using cached data\"\n[1] \"using cached data\"\n\n\nWarning: Removed 267 rows containing missing values or values outside the scale range\n(`geom_line()`).\n\n\n\n\n\n\n\n\n\nCode\nsource(here::here(\"R/plotStationsStream.R\"))\nplotStationsStream(stations, param_name)\n\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\n\n[1] \"using cached data\"\n[1] \"using cached data\"\n[1] \"using cached data\""
  },
  {
    "objectID": "riverflowSouthwest.html",
    "href": "riverflowSouthwest.html",
    "title": "Southwestern Flow out of Everglades",
    "section": "",
    "text": "This report is temporarily disabled because station Flam is not reporting discharge data.\n\n\nCode\n# SW flow out of Everglades\nstations &lt;- c(\n  \"BotCr\",\n  \"Flam\"\n)\n\nparam_name &lt;- \"Disch\"\n\nsource(\"R/plotStationsLine.R\")\nplotStationsLine(stations, param_name)\n\nsource(\"R/plotStationsStream.R\")\nplotStationsStream(stations, param_name)"
  }
]